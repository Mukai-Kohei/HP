"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9544],{49544:(n,t,e)=>{e.d(t,{ab:()=>f,Ht:()=>h,Ui:()=>l,yx:()=>p});var r=e(61975),a=e(82732),i=e(45849),u=e(22043),c=e(71450),s=(0,e(96509).S)({storeDomain:"18dee2-bf.myshopify.com",publicAccessToken:"2c9f7545e17348a108e8742093c7c1d4",apiVersion:"2025-01"}),d=e(12115);function o(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=(0,u._)((0,d.useState)(null),2),a=e[0],i=e[1],o=(0,u._)((0,d.useState)(!1),2),l=o[0],h=o[1],f=(0,u._)((0,d.useState)(!1),2),m=f[0],p=f[1],v=(0,u._)((0,d.useState)(null),2),g=v[0],b=v[1],C=(0,d.useCallback)(function(){return(0,r._)(function(){var e,r,a,u;return(0,c.YH)(this,function(c){switch(c.label){case 0:h(!0),p(!1),b(null),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,s.request(n,{variables:t})];case 2:if(r=(e=c.sent()).data,a=e.errors)throw Error(a.message);return i(r),[3,5];case 3:return u=c.sent(),p(!0),b(u),[3,5];case 4:return h(!1),[7];case 5:return[2]}})})()},[n,t]);return{data:a,refetch:(0,d.useCallback)(function(){return C()},[]),isLoading:l,isSuccess:!m,isError:m,error:g}}var l=function(){return o("\n  #graphql\n  query ShopifyGetProducts {\n    products(first: 10) {\n      edges {\n        node {\n          id\n          handle\n          title\n          vendor\n          variants(first: 250) {\n            edges {\n              node {\n                id\n                sku\n                title\n                availableForSale\n                quantityAvailable\n                image {\n                  id\n                  url\n                  width\n                  height\n                  altText\n                }\n                price {\n                  amount\n                  currencyCode\n                }\n                compareAtPrice {\n                  amount\n                  currencyCode\n                }\n              }\n            }\n          }\n          images(first: 250) {\n            pageInfo {\n              hasNextPage\n              hasPreviousPage\n            }\n            edges {\n              cursor\n              node {\n                id\n                url\n                altText\n                width\n                height\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ")},h=function(n){return o("\n  #graphql\n  query ShopifyGetProductById($productId: ID!) {\n    product(id: $productId) {\n      id\n      handle\n      title\n    }\n  }\n  ",{productId:n})},f=function(n){return o("\n    #graphql\n    query ShopifyGetProductByHandle($handle: String!) {\n      productByHandle(handle: $handle) {\n        id\n        handle\n        title\n        vendor\n        publishedAt\n        tags\n        variants(first: 250) {\n          edges {\n            node {\n              id\n              sku\n              title\n              availableForSale\n              quantityAvailable\n              image {\n                id\n                url\n                width\n                height\n                altText\n              }\n              price {\n                amount\n                currencyCode\n              }\n              compareAtPrice {\n                amount\n                currencyCode\n              }\n            }\n          }\n        }\n        images(first: 250) {\n          edges {\n            node {\n              id\n              url\n              width\n              height\n              altText\n            }\n          }\n        }\n      }\n    }\n  ",{handle:n})},m="\n  #graphql\n  query ShopifyGetCart($cartId: ID!) {\n    cart(id: $cartId) {\n      id\n      createdAt\n      updatedAt\n      checkoutUrl\n      lines(first: 10) {\n        edges {\n          node {\n            id\n            quantity\n            merchandise {\n              ... on ProductVariant {\n                id\n                sku\n                title\n                image {\n                  id\n                  url\n                  width\n                  height\n                  altText\n                }\n                price {\n                  amount\n                  currencyCode\n                }\n                product {\n                  id\n                  title\n                  handle\n                }\n              }\n            }\n            attributes {\n              key\n              value\n            }\n          }\n        }\n      }\n      attributes {\n        key\n        value\n      }\n      cost {\n        totalAmount {\n          amount\n          currencyCode\n        }\n        subtotalAmount {\n          amount\n          currencyCode\n        }\n      }\n    }\n  }\n",p=function(){var n=(0,u._)((0,d.useState)(null),2),t=n[0],e=n[1],o=(0,u._)((0,d.useState)(!1),2),l=o[0],h=o[1];(0,d.useEffect)(function(){(0,r._)(function(){var n,t,r,a,i,u,d,o,l,h,f,p,v;return(0,c.YH)(this,function(c){switch(c.label){case 0:if(!(u=sessionStorage.getItem("cartId")))return[3,2];return[4,s.request(m,{variables:{cartId:u}})];case 1:if(null==(d=(o=c.sent()).data)?void 0:d.cart)return e(null==(l=o.data)?void 0:l.cart),[2];c.label=2;case 2:return h={variables:{input:{}}},[4,s.request("\n      #graphql\n      mutation ShopifyCreateCart($input: CartInput) {\n        cartCreate(input: $input) {\n          cart {\n            id\n            createdAt\n            updatedAt\n            checkoutUrl\n            lines(first: 10) {\n              edges {\n                node {\n                  id\n                  quantity\n                  merchandise {\n                    ... on ProductVariant {\n                      id\n                    }\n                  }\n                }\n              }\n            }\n            attributes {\n              key\n              value\n            }\n            cost {\n              totalAmount {\n                amount\n                currencyCode\n              }\n              subtotalAmount {\n                amount\n                currencyCode\n              }\n            }\n          }\n        }\n      }\n      ",h)];case 3:return f=c.sent(),sessionStorage.setItem("cartId",null!=(p=null==(r=f.data)||null==(t=r.cartCreate)||null==(n=t.cart)?void 0:n.id)?p:""),e(null!=(v=null==(i=f.data)||null==(a=i.cartCreate)?void 0:a.cart)?v:null),[2]}})})()},[]),(0,d.useEffect)(function(){if(t&&window){var n,e,r=null!=(e=null==(n=t.lines)?void 0:n.edges.reduce(function(n,t){return n+t.node.quantity},0))?e:0;window.document.dispatchEvent(new CustomEvent("app-cart-changed",{detail:{count:r}}))}},[t]);var f=(0,d.useCallback)(function(){var n,e;return t&&null!=(e=null==(n=t.lines)?void 0:n.edges.reduce(function(n,t){return n+t.node.quantity},0))?e:0},[t]),p=(0,d.useCallback)(function(n,e){return(0,r._)(function(){var r;return(0,c.YH)(this,function(a){switch(a.label){case 0:if(!t||!t.id)return console.warn("cart is not initialized"),[2];return r={variables:{cartId:n,lines:e}},[4,s.request("\n        #graphql\n        mutation cartLinesAdd($cartId: ID!, $lines: [CartLineInput!]!) {\n          cartLinesAdd(cartId: $cartId, lines: $lines) {\n            cart {\n              id\n              createdAt\n              updatedAt\n              checkoutUrl\n              lines(first: 10) {\n                edges {\n                  node {\n                    id\n                    quantity\n                    merchandise {\n                      ... on ProductVariant {\n                        id\n                        title\n                        image {\n                          id\n                          url\n                          width\n                          height\n                          altText\n                        }\n                        price {\n                          amount\n                          currencyCode\n                        }\n                        product {\n                          id\n                          title\n                        }\n                      }\n                    }\n                    attributes {\n                      key\n                      value\n                    }\n                  }\n                }\n              }\n              attributes {\n                key\n                value\n              }\n              cost {\n                totalAmount {\n                  amount\n                  currencyCode\n                }\n                subtotalAmount {\n                  amount\n                  currencyCode\n                }\n              }\n            }\n          }\n        }\n      ",r)];case 1:return[2,a.sent()]}})})()},[t]),v=(0,d.useCallback)(function(n){return(0,r._)(function(){var r,a,i;return(0,c.YH)(this,function(u){switch(u.label){case 0:if(!t||!t.id)return console.warn("cart is not initialized"),[2];return h(!0),[4,p(t.id,n)];case 1:return e(null==(i=u.sent())||null==(a=i.data)||null==(r=a.cartLinesAdd)?void 0:r.cart),h(!1),[2]}})})()},[t,p]),g=(0,d.useCallback)(function(n,e){return(0,r._)(function(){var r;return(0,c.YH)(this,function(a){switch(a.label){case 0:if(!t)return console.warn("cart is not initialized"),[2];return r={variables:{cartId:n,lines:e}},[4,s.request("\n        #graphql\n        mutation cartLinesUpdate($cartId: ID!, $lines: [CartLineUpdateInput!]!) {\n          cartLinesUpdate(cartId: $cartId, lines: $lines) {\n            cart {\n              id\n              createdAt\n              updatedAt\n              checkoutUrl\n              lines(first: 10) {\n                edges {\n                  node {\n                    id\n                    quantity\n                    merchandise {\n                      ... on ProductVariant {\n                        id\n                        title\n                        image {\n                          id\n                          url\n                          width\n                          height\n                          altText\n                        }\n                        price {\n                          amount\n                          currencyCode\n                        }\n                        product {\n                          id\n                          title\n                        }\n                      }\n                    }\n                    attributes {\n                      key\n                      value\n                    }\n                  }\n                }\n              }\n              attributes {\n                key\n                value\n              }\n              cost {\n                totalAmount {\n                  amount\n                  currencyCode\n                }\n                subtotalAmount {\n                  amount\n                  currencyCode\n                }\n              }\n            }\n          }\n        }\n      ",r)];case 1:return[2,a.sent()]}})})()},[t]),b=(0,d.useCallback)(function(n){return(0,r._)(function(){var r,a,i;return(0,c.YH)(this,function(u){switch(u.label){case 0:if(!t||!t.id)return console.warn("cart is not initialized"),[2];return h(!0),[4,g(t.id,n)];case 1:return e(null==(i=u.sent())||null==(a=i.data)||null==(r=a.cartLinesUpdate)?void 0:r.cart),h(!1),[2]}})})()},[t,g]),C=(0,d.useCallback)(function(n){return(0,r._)(function(){var r,a,i,u;return(0,c.YH)(this,function(c){switch(c.label){case 0:if(!t||!t.id)return console.warn("cart is not initialized"),[2];return i={variables:{cartId:t.id,lineIds:n}},h(!0),[4,s.request("\n        #graphql\n        mutation cartLinesRemove($cartId: ID!, $lineIds: [ID!]!) {\n          cartLinesRemove(cartId: $cartId, lineIds: $lineIds) {\n            cart {\n              id\n              createdAt\n              updatedAt\n              checkoutUrl\n              lines(first: 10) {\n                edges {\n                  node {\n                    id\n                    quantity\n                    merchandise {\n                      ... on ProductVariant {\n                        id\n                        title\n                        image {\n                          id\n                          url\n                          width\n                          height\n                          altText\n                        }\n                        price {\n                          amount\n                          currencyCode\n                        }\n                        product {\n                          id\n                          title\n                        }\n                      }\n                    }\n                    attributes {\n                      key\n                      value\n                    }\n                  }\n                }\n              }\n              attributes {\n                key\n                value\n              }\n              cost {\n                totalAmount {\n                  amount\n                  currencyCode\n                }\n                subtotalAmount {\n                  amount\n                  currencyCode\n                }\n              }\n            }\n          }\n        }\n      ",i)];case 1:return e(null==(u=c.sent())||null==(a=u.data)||null==(r=a.cartLinesRemove)?void 0:r.cart),h(!1),[2]}})})()},[t]),y=(0,d.useCallback)(function(n){return(0,r._)(function(){var e;return(0,c.YH)(this,function(r){switch(r.label){case 0:if(!t||!t.id)return console.warn("cart is not initialized"),[2];return e={variables:{cartId:t.id,discountCodes:[n]}},[4,s.request("\n        #graphql\n        mutation cartDiscountCodesUpdate($cartId: ID!, $discountCodes: [String!]!) {\n          cartDiscountCodesUpdate(cartId: $cartId, discountCodes: $discountCodes) {\n            cart {\n              id\n            }\n          }\n        }\n      ",e)];case 1:return r.sent(),[2]}})})()},[t]),I=(0,d.useCallback)(function(){return(0,r._)(function(){var n;return(0,c.YH)(this,function(e){switch(e.label){case 0:if(!t||!t.id)return console.warn("cart is not initialized"),[2];return n={variables:{cartId:t.id,discountCodes:[]}},[4,s.request("\n      #graphql\n      mutation cartDiscountCodesRemove($cartId: ID!, $discountCodes: [String!]!) {\n        cartDiscountCodesUpdate(cartId: $cartId, discountCodes: $discountCodes) {\n          cart {\n            id\n          }\n        }\n      }\n    ",n)];case 1:return e.sent(),[2]}})})()},[t]);return{cart:t,getCartCount:f,addLineItems:v,updateLineItems:b,removeLineItems:C,addDiscount:y,removeDiscount:I,refetchCart:(0,d.useCallback)(function(){return(0,r._)(function(){var n,t,r,u,d;return(0,c.YH)(this,function(c){switch(c.label){case 0:if(!(n=sessionStorage.getItem("cartId")))return[2];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,s.request(m,{variables:{cartId:n}})];case 2:return(null==(t=(r=c.sent()).data)?void 0:t.cart)&&(d=null==(u=r.data)?void 0:u.cart,e(function(n){if(!n)return d;var t=(0,i._)((0,a._)({},n),{checkoutUrl:""}),e=(0,i._)((0,a._)({},d),{checkoutUrl:""});return JSON.stringify(t)!==JSON.stringify(e)?d:n})),[3,4];case 3:return console.error("カートの再取得に失敗しました:",c.sent()),[3,4];case 4:return[2]}})})()},[]),isLoading:l}}}}]);