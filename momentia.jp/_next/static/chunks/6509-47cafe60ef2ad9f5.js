"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6509],{96509:(e,r,t)=>{t.d(r,{S:()=>C});let n="GraphQL Client",o="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",s="Response returned unexpected Content-Type:",a="An unknown error has occurred. The API did not return a data object or any errors in its response.",i={json:"application/json",multipart:"multipart/mixed"},c="X-SDK-Variant",l="X-SDK-Version",u=[429,503],d=/@(defer)\b/i,p=/boundary="?([^=";]+)"?/i,h="\r\n\r\n";function f(e,r=n){return e.startsWith(`${r}`)?e:`${r}: ${e}`}function y(e){return e instanceof Error?e.message:JSON.stringify(e)}function m(e){return e instanceof Error&&e.cause?e.cause:void 0}function w(e){return e.flatMap(({errors:e})=>e??[])}function g({client:e,retries:r}){if(void 0!==r&&("number"!=typeof r||r<0||r>3))throw Error(`${e}: The provided "retries" value (${r}) is invalid - it cannot be less than 0 or greater than 3`)}function $(e,r){return r&&("object"!=typeof r||Array.isArray(r)||"object"==typeof r&&Object.keys(r).length>0)?{[e]:r}:{}}function b([e,...r]){return r.reduce(function e(r,t){return Object.keys(t||{}).reduce((n,o)=>(("object"==typeof t[o]||Array.isArray(t[o]))&&r[o]?n[o]=e(r[o],t[o]):n[o]=t[o],n),Array.isArray(r)?[...r]:{...r})},{...e})}async function S(e){return new Promise(r=>setTimeout(r,e))}async function E(e){let{errors:r,data:t,extensions:n}=await e.json();return{...$("data",t),...$("extensions",n),headers:e.headers,...r||!t?{errors:{networkStatusCode:e.status,message:f(r?o:a),...$("graphQLErrors",r),response:e}}:{}}}async function*v(e){let r=new TextDecoder;if(e.body[Symbol.asyncIterator])for await(let t of e.body)yield r.decode(t);else{let t,n=e.body.getReader();try{for(;!(t=await n.read()).done;)yield r.decode(t.value)}finally{n.cancel()}}}function k({client:e,currentSupportedApiVersions:r,apiVersion:t,logger:n}){let o=`${e}: the provided apiVersion ("${t}")`,s=`Currently supported API versions: ${r.join(", ")}`;if(!t||"string"!=typeof t)throw Error(`${o} is invalid. ${s}`);let a=t.trim();r.includes(a)||(n?n({type:"Unsupported_Api_Version",content:{apiVersion:t,supportedApiVersions:r}}):console.warn(`${o} is likely deprecated or not supported. ${s}`))}function A(e){let r=3*e-2;return 10===r?r:`0${r}`}function T(e,r,t){let n=r-t;return n<=0?`${e-1}-${A(n+4)}`:`${e}-${A(n)}`}let j="application/json",x="Storefront API Client";function C({storeDomain:e,apiVersion:r,publicAccessToken:t,privateAccessToken:C,clientName:I,retries:O=0,customFetchApi:P,logger:R}){var N,D,L,q,V;let U=function(){let{year:e,quarter:r,version:t}=function(){let e=new Date,r=e.getUTCMonth(),t=e.getUTCFullYear(),n=Math.floor(r/3+1);return{year:t,quarter:n,version:`${t}-${A(n)}`}}(),n=4===r?`${e+1}-01`:`${e}-${A(r+1)}`;return[T(e,r,3),T(e,r,2),T(e,r,1),t,n,"unstable"]}(),Q=function({client:e,storeDomain:r}){try{if(!r||"string"!=typeof r)throw Error();let e=r.trim(),t=e.match(/^https?:/)?e:`https://${e}`,n=new URL(t);return n.protocol="https",n.origin}catch(t){throw Error(`${e}: a valid store domain ("${r}") must be provided`,{cause:t})}}({client:x,storeDomain:e}),X={client:x,currentSupportedApiVersions:U,logger:R};if(k({...X,apiVersion:r}),!t&&!C)throw Error(`${x}: a public or private access token must be provided`);if(t&&C)throw Error(`${x}: only provide either a public or private access token`);if(C&&"undefined"!=typeof window)throw Error(`${x}: private access tokens and headers should only be used in a server-to-server implementation. Use the public API access token in nonserver environments.`);let _=(N=Q,D=r,L=X,e=>{e&&k({...L,apiVersion:e});let r=(e??D).trim();return`${N}/api/${r}/graphql.json`}),K={storeDomain:Q,apiVersion:r,...t?{publicAccessToken:t}:{privateAccessToken:C},headers:{"Content-Type":j,Accept:j,"X-SDK-Variant":"storefront-api-client","X-SDK-Version":"1.0.9",...I?{"X-SDK-Variant-Source":I}:{},...t?{"X-Shopify-Storefront-Access-Token":t}:{"Shopify-Storefront-Private-Token":C}},apiUrl:_(),clientName:I},H=function({headers:e,url:r,customFetchApi:t=fetch,retries:k=0,logger:A}){var T,j,x;g({client:n,retries:k});let C={headers:e,url:r,retries:k},I=function(e,{url:r,headers:t,retries:o}){return async(s,a={})=>{let{variables:i,headers:u,url:d,retries:p,keepalive:h,signal:f}=a,y=JSON.stringify({query:s,variables:i});g({client:n,retries:p});let m=Object.entries({...t,...u}).reduce((e,[r,t])=>(e[r]=Array.isArray(t)?t.join(", "):t.toString(),e),{});return m[c]||m[l]||(m[c]="shopify-graphql-client",m[l]="1.4.1"),e([d??r,{method:"POST",headers:m,body:y,signal:f,keepalive:h}],1,p??o)}}(function({clientLogger:e,customFetchApi:r=fetch,client:t=n,defaultRetryWaitTime:o=1e3,retriableCodes:s=u}){let a=async(n,i,c)=>{let l,u=i+1,d=c+1;try{if(l=await r(...n),e({type:"HTTP-Response",content:{requestParams:n,response:l}}),!l.ok&&s.includes(l.status)&&u<=d)throw Error();let t=l?.headers.get("X-Shopify-API-Deprecated-Reason")||"";return t&&e({type:"HTTP-Response-GraphQL-Deprecation-Notice",content:{requestParams:n,deprecationNotice:t}}),l}catch(r){if(u<=d){let r=l?.headers.get("Retry-After");return await S(r?parseInt(r,10):o),e({type:"HTTP-Retry",content:{requestParams:n,lastResponse:l,retryAttempt:i,maxRetries:c}}),a(n,u,c)}throw Error(f(`${c>0?`Attempted maximum number of ${c} network retries. Last message - `:""}${y(r)}`,t))}};return a}({customFetchApi:t,clientLogger:(T=A,e=>{T&&T(e)}),defaultRetryWaitTime:1e3}),C),O=(j=I,async(...e)=>{if(d.test(e[0]))throw Error(f("This operation will result in a streamable response - use requestStream() instead."));let r=null;try{let{status:t,statusText:n}=r=await j(...e),o=r.headers.get("content-type")||"";if(!r.ok)return{errors:{networkStatusCode:t,message:f(n),response:r}};if(!o.includes(i.json))return{errors:{networkStatusCode:t,message:f(`${s} ${o}`),response:r}};return await E(r)}catch(e){return{errors:{message:y(e),...null==r?{}:{networkStatusCode:r.status,response:r}}}}}),P=(x=I,async(...e)=>{if(!d.test(e[0]))throw Error(f("This operation does not result in a streamable response - use request() instead."));try{let r=await x(...e),{statusText:t}=r;if(!r.ok)throw Error(t,{cause:r});let n=r.headers.get("content-type")||"";switch(!0){case n.includes(i.json):return{async *[Symbol.asyncIterator](){let e=await E(r);yield{...e,hasNext:!1}}};case n.includes(i.multipart):return function(e,r){let t,n=(r??"").match(p),s=`--${n?n[1]:"-"}`;if(!e.body?.getReader&&!e.body?.[Symbol.asyncIterator])throw Error("API multipart response did not return an iterable body",{cause:e});let i=v(e),c={};return{async *[Symbol.asyncIterator](){try{let e=!0;for await(let n of{async *[Symbol.asyncIterator](){try{let e="";for await(let r of i)if((e+=r).indexOf(s)>-1){let r=e.lastIndexOf(s),t=e.slice(0,r).split(s).filter(e=>e.trim().length>0).map(e=>e.slice(e.indexOf(h)+h.length).trim());t.length>0&&(yield t),e=e.slice(r+s.length),"--"===e.trim()&&(e="")}}catch(e){throw Error(`Error occured while processing stream payload - ${y(e)}`)}}}){let s=n.map(e=>{try{return JSON.parse(e)}catch(e){throw Error(`Error in parsing multipart response - ${y(e)}`)}}).map(e=>{let{data:r,incremental:t,hasNext:n,extensions:o,errors:s}=e;if(!t)return{data:r||{},...$("errors",s),...$("extensions",o),hasNext:n};let a=t.map(({data:e,path:r,errors:t})=>({data:e&&r?function e(r,t){if(0===r.length)return t;let n={[r.pop()]:t};return 0===r.length?n:e(r,n)}(r,e):{},...$("errors",t)}));return{data:1===a.length?a[0].data:b([...a.map(({data:e})=>e)]),...$("errors",w(a)),hasNext:n}});t=s.find(e=>e.extensions)?.extensions??t;let i=w(s);c=b([c,...s.map(({data:e})=>e)]),e=s.slice(-1)[0].hasNext;var r=c;if(i.length>0)throw Error(o,{cause:{graphQLErrors:i}});if(0===Object.keys(r).length)throw Error(a);yield{...$("data",c),...$("extensions",t),hasNext:e}}if(e)throw Error("Response stream terminated unexpectedly")}catch(n){let r=m(n);yield{...$("data",c),...$("extensions",t),errors:{message:f(y(n)),networkStatusCode:e.status,...$("graphQLErrors",r?.graphQLErrors),response:e},hasNext:!1}}}}}(r,n);default:throw Error(`${s} ${n}`,{cause:r})}}catch(e){return{async *[Symbol.asyncIterator](){let r=m(e);yield{errors:{message:f(y(e)),...$("networkStatusCode",r?.status),...$("response",r)},hasNext:!1}}}}});return{config:C,fetch:I,request:O,requestStream:P}}({headers:K.headers,url:K.apiUrl,retries:O,customFetchApi:P,logger:R}),J=e=>({...e??{},...K.headers}),M=(q=K,V=_,e=>e?V(e):q.apiUrl),G=function({getHeaders:e,getApiUrl:r}){return(t,n)=>{let o=[t];if(n&&Object.keys(n).length>0){let{variables:t,apiVersion:s,headers:a,retries:i,signal:c}=n;o.push({...t?{variables:t}:{},...a?{headers:e(a)}:{},...s?{url:r(s)}:{},...i?{retries:i}:{},...c?{signal:c}:{}})}return o}}({getHeaders:J,getApiUrl:M});return Object.freeze({config:K,getHeaders:J,getApiUrl:M,fetch:(...e)=>H.fetch(...G(...e)),request:(...e)=>H.request(...G(...e)),requestStream:(...e)=>H.requestStream(...G(...e))})}}}]);